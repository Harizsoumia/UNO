import javax.swing.*;
import javax.swing.border.EmptyBorder;
import javax.swing.plaf.basic.BasicMenuItemUI;
import javax.swing.table.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.text.*;

public class ComposantsPersonnalises {

    // ======== MENU ========
    public static JMenuBar creerMenuBarPersonnalise() {
        JMenuBar menuBar = new JMenuBar() {
            @Override
            protected void paintComponent(Graphics g) {
                Graphics2D g2 = (Graphics2D) g;
                g2.setColor(new Color(135, 206, 235));  // Fond bleu ciel
                g2.fillRoundRect(0, 0, getWidth(), getHeight(), 20, 20);
            }
        };
        menuBar.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);  // RTL
        return menuBar;
    }

    public static JMenu creerMenu(String titre) {
        JMenu menu = new JMenu(titre);
        menu.setFont(new Font("Tahoma", Font.PLAIN, 18));
        menu.setDelay(100);  // Animation fluide
        return menu;
    }

    public static JMenuItem creerMenuItem(String texte, String cheminIcone) {
        JMenuItem item = new JMenuItem(texte);
        item.setFont(new Font("Tahoma", Font.PLAIN, 18));
        item.setIcon(new ImageIcon(cheminIcone));
        item.setUI(new BasicMenuItemUI());  // Pour effet hover fluide
        return item;
    }

    // ======== TEXTFIELD ========
    public static JTextField creerTextFieldPersonnalise(String placeholder) {
        JTextField textField = new JTextField(placeholder) {
            @Override
            protected void paintComponent(Graphics g) {
                Graphics2D g2 = (Graphics2D) g;
                g2.setColor(new Color(230, 240, 255));
                g2.fillRoundRect(0, 0, getWidth(), getHeight(), 20, 20);
                super.paintComponent(g);
            }
        };
        textField.setFont(new Font("Tahoma", Font.PLAIN, 18));
        textField.setBorder(new EmptyBorder(5, 10, 5, 10));
        textField.setOpaque(false);
        textField.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);

        // Curseur personnalisé
        Caret curseur = new DefaultCaret() {
            @Override
            protected synchronized void damage(Rectangle r) {
                if (r != null) {
                    x = r.x;
                    y = r.y;
                    width = 2;
                    height = r.height;
                    repaint();
                }
            }
        };
        curseur.setBlinkRate(500);
        textField.setCaret(curseur);
        return textField;
    }

    // ======== TEXTAREA ========
    public static JTextArea creerTextAreaPersonnalise() {
        JTextArea textArea = new JTextArea() {
            @Override
            protected void paintComponent(Graphics g) {
                Graphics2D g2 = (Graphics2D) g;
                g2.setColor(new Color(220, 230, 250));
                g2.fillRoundRect(0, 0, getWidth(), getHeight(), 20, 20);
                super.paintComponent(g);
            }
        };
        textArea.setFont(new Font("Tahoma", Font.PLAIN, 18));
        textArea.setOpaque(false);
        textArea.setBorder(new EmptyBorder(10, 10, 10, 10));
        textArea.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        return textArea;
    }

    // ======== TABLE ========
    public static JTable creerTablePersonnalisee(TableModel model) {
        JTable table = new JTable(model);
        table.setFont(new Font("Tahoma", Font.PLAIN, 18));
        table.setRowHeight(32);
        table.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);

        // Header personnalisé
        JTableHeader header = new JTableHeader(table.getColumnModel()) {
            @Override
            protected void paintComponent(Graphics g) {
                Graphics2D g2 = (Graphics2D) g;
                g2.setColor(new Color(135, 206, 235));
                g2.fillRoundRect(0, 0, getWidth(), getHeight(), 20, 20);
                super.paintComponent(g);
            }
        };
        header.setFont(new Font("Tahoma", Font.BOLD, 18));
        header.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        table.setTableHeader(header);

        // Couleurs zébrées
        table.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {
            @Override
            public Component getTableCellRendererComponent(JTable table, Object value,
                                                           boolean isSelected, boolean hasFocus, int row, int column) {
                JLabel cell = (JLabel) super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
                cell.setFont(new Font("Tahoma", Font.PLAIN, 18));
                cell.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
                cell.setBackground(!isSelected
                        ? (row % 2 == 0 ? new Color(240, 245, 255) : Color.WHITE)
                        : new Color(180, 200, 255));
                return cell;
            }
        });

        // Tri visuel
        table.setRowSorter(new TableRowSorter<>(model));
        return table;
    }
}
